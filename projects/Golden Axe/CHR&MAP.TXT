Файл графики .CHR игры GOLDEN AXE содержит графику фона уровня.
Он может быть сжат общим для всех файлов этой игры методом. Сжатый файл устроен
так:
+00 DB*10 заголовок: 'GOLDENAXE',0Ch
+0A ... тело файла
+?? DB*20 мусор: 20 последних байт отбрасываются
Тело файла сжато LZW-методом в реализации, почти соответствующей формату GIF:
коды от 9 до 12 бит, размер таблицы 1000h кодов, 100h - код очистки; однако,
код конца информации не используется, так что коды сжатия начинаются со 101h,
и данные начинаются со значащего кода, а не с кода очистки.
Коды размещаются в файле пакетами по 8, все коды в пакете одной длины, выборка
идет с младших битов и с младших адресов; если длина кода меняется до исчерпа-
ния текущего пакета, остаток пакета отбрасывается; в последнем пакете только
столько байт, сколько реально занято кодами.Несколько последних кодов могут
быть ошибочными,так что на первом же коде,большем текущего,распаковку следует
закончить.
Описывать здесь сам LZW-метод я счел неуместным - так что RTFM.
То, что получается при LZW-распаковке, кроме того, дополнительно сжато
RLE-методом: 90h XXh - (XXh-1) раз повторить последний не равный 90h байт;
90h 00h - выдать 90h; иначе просто выдать байт в выходное изображение.
Несжатое тело файла представляет собой массив блоков - байтовых массивов 8*8.

Файл .MAP игры GOLDEN AXE содержит карту размещения блоков из CHR-файла на
экране (с учетом возможной прокрутки). Он также сжат описанным выше методом.
Несжатое тело файла устроено так:
+0 DW число блоков по горизонтали
+2 DW число блоков по вертикали
+4 DW*? массив номеров самих этих блоков, умноженных на 2
При этом в битах 11-15 номеров блоков содержатся флаги, к графике отношения
не имеющие, так что собственно номер получаем по AND 07FEh.

Только и всего...
