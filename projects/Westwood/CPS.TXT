Файл графики .CPS состоит из заголовка и тела. Тело файла представляет собой
простой образ видеопамяти, сжатый блочным методом; состоит, естественно, из
блоков, 0 - прозрачный цвет (если он нужен).
Заголовок файла устроен так:
+0 DW длина файла-2
+2 DW*3 непонятно что
+8 DW размер встроенной палитры в байтах (0 если ее нет)
+A ... встроенная палитра, если она есть
+? ... тело файла
Блоки устроены так:
концевик:
+0 DB 80h , на нем вывод изображения прекращается
блок длинного повторенного копирования:
+0 DB 0FFh
+1 DW счетчик
+3 DW смещение источника в видеопамяти
блок заполнения:
+0 DB 0FEh
+1 DW счетчик
+3 DB цвет
блок среднего повторенного копирования:
+0 DB 11xxxxxx
+1 DW смещение источника в видеопамяти , по нему копируются (xxxxxx+3) точек
блок копирования:
+0 DB 10xxxxxx
+1 DB (xxxxxx) байт изображения, по нему они копируются на экран
блок короткого повторенного копирования:
+0 DB 0xxxyyyy
+1 DB 0ZTh , по нему (xxx+3) точек копируются из ($-0YZTh)
            ( $-текущее смещение, Y=yyyy)

Вот,собственно,и все...