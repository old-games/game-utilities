Файл графики .ICN игры Heroes of Might and Magic II устроен так:
+0 DW число картинок в файле
+2 DD размер файла-6
+6 ... заголовки картинок
+? ... тела картинок
Заголовок картинки устроен так:
+0 DW сдвиг слева
+2 DW сдвиг сверху
+4 DW ширина картинки
+6 DW высота картинки
+8 DB счетчик анимации: число кадров анимации в текущей последовательности-1;
      первая из подряд идущих картинок с ненулевым счетчиком - базовая страница
      (каждая из остальных выводится поверх нее)
+9 DD смещение тела картинки в файле-6
+D ... (следующий заголовок)
Тело картинки состоит из набора блоков.Блоки устроены так:
блок копирования:
+0 DB 0xxxxxxx, X>0
+1 DB (xxxxxxx) байт изображения, по нему они копируются на экран
блок пропуска:
+0 DB 10xxxxxx, X>0, по нему (xxxxxx) точек пропускается (прозрачный цвет)
блок заполнения:
+0 DB 11xxxxxx, X>0
+1 DB цвет , по нему (xxxxxx) точек закрашиваются этим цветом
блок длинного заполнения:
+0 DB 11000001
+1 DB X
+2 DB цвет , по нему X точек закрашиваются этим цветом
блок затенения/выделения:
+0 DB 11000000
+1 DB abyyyyxx, X>0, по нему (xx) точек в выходном буфере:
      - при a=1 и задании извне ненулевого цвета выделяющего контура (я задавал
        цвет 33h) закрашиваются этим цветом; иначе
      - при b=1, преобразуются по (yyyy)-й таблице затенения из предопределен-
        ного их набора (Y<0Eh); иначе
      - просто пропускаются
блок длинного затенения:
+0 DB 11000000
+1 DB abyyyy00
+2 DB X, по нему X точек обрабатываются так же, как для блока затенения
концевик строки:
+0 DB 00000000, по нему происходит переход к следующей строке
концевик картинки:
+0 DB 10000000, по нему вывод изображения прекращается
Таблицы затенения в файле HEROES2.EXE v1.2 находятся по смещению 141990h.

Вот,собственно,и все...