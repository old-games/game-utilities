Файл графики в Might and Magic IV-V состоит из заголовка и набора листов изобра-
жения.Листы состоят из заголовка и набора строк изображения.Строки состоят из
заголовка и набора блоков строки.
Заголовок файла устроен так:
+0 DW число картинок в файле
+2 DW смещение 1-го листа 1-й картинки
+4 DW смещение 2-го листа 1-й картинки или 0,если его нет
+6 ... (так же для всех картинок)
Заголовок листа устроен так:
+0 DW собственный сдвиг листа вправо
+2 DW дополнительный сдвиг листа вправо при зеркальном отражении+1 (ширина его)
+4 DW собственный сдвиг листа вниз
+6 DW число строк в листе
+8 ... (строки)
Заголовок строки устроен так:
+0 DB длина строки-1
+1 DB собственный сдвиг строки слева (при [+0]=0 это число пропускаемых строк-1)
+2 ... (блоки, если они есть)
Блоки строки устроены так:
блок копирования:
+0 DB 00xxxxxx
+1 DB (xxxxxx+1) байт изображения, по нему они выводятся на экран
блок пропуска:
+0 DB 101xxxxx , по нему (xxxxx+1) точек пропускается (прозрачный цвет)
блок заполнения:
+0 DB 010xxxxx
+1 DB цвет , по нему (xxxxx+3) точек закрашиваются этим цветом
блок парного заполнения:
+0 DB 100xxxxx
+1 DW 2 цвета , по нему (xxxxx+2) пар точек закрашиваются этой парой цветов
блок повторенного копирования:
+0 DB 011xxxxx
+1 DW bkstep , по нему выводятся (xxxxx+4) байт изображения из ($-bkstep)
      (здесь $=смещение начала СЛЕДУЮЩЕГО блока)
блок цветового перехода:
+0 DB 11yyyxxx
+1 DB цвет С[1], по нему (xxx+3) точек закрашиваются по правилу: С[n+1]=С[n]+d,
      где d зависит от yyy так: 0 - 0 и 1; 1 - 1 и 1; 2 - 2 и 2; 3 - 3 и 3;
      4 - 0 и -1; 5 - -1 и -1; 6 - -2 и -2; 7 - -3 и -3 (значения d исполь-
      зуются попарно,например:0,1,0,1,0,1...)

Вот,собственно,и все...