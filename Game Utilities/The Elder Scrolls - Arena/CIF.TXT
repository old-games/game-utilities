Файл графики .CIF игры THE ELDER SCROLLS: THE ARENA состоит из набора картинок.
Картинки состоят из заголовка и тела.
Заголовок картинки устроен так:
+00 DW собственный сдвиг слева
+02 DW собственный сдвиг сверху
+04 DW ширина картинки
+06 DW высота картинки
+08 DW флаги: бит 0 - блочное RLE-сжатие
              бит 1 - то же
              бит 2 - LZ-сжатие
              бит 3 - адаптивное кодирование Хаффмена+LZ
              биты 4-10 всегда 0
              бит 11 - есть прозрачность (без него,впрочем,она тоже есть)
              биты 12-15 всегда 0
+0A DB размер тела картинки
+0C ... тело картинки
Тело картинки с блочным сжатием состоит,естественно,из блоков.Они устроены так:
 блок копирования: DB 0xxxxxxx / DB (X+1) байт;
 блок заполнения:  DB 1xxxxxxx / DB байт; этот байт повторяется (X+1) раз.
Раскодирование LZ-сжатого тела ведется по следующей схеме LZ-метода:
Кольцевой буфер раскодировки имеет длину 1000h байт и инициализируется кодом
20h в количестве 0FEEh штук;раскодировка производится следующим образом:
извлекается флаговый байт,каждый бит которого означает:для 1,извлечь очередной
байт,поместить его в выходное изображение и в конец буфера;для 0,извлечь слово,
трактуемое как XYZTh и поместить в выходное изображение и в конец буфера по
одному (Y+3) байт начиная со смещения 0XZTh в буфере;по исчерпании битов
флагового байта,извлечь новый флаговый байт.Раскодировка прерывается в момент
исчерпания входных данных.
Тело,сжатое адаптивным методом Хаффмена,устроено так:
+0 DW распакованный размер тела
+2 DB*? сами сжатые данные
Реализация адаптивного метода Хаффмена вполне тривиальная;коды 100h-139h исполь-
зуются как коды LZ-сжатия:за ними во входном потоке следует байт,определяющий
12-битовое смещение (назад от $-1) строки в буфере (старшие 6 бит определяются
по таблице,младшие 1-6 бит извлекаются из входного потока,между ними - младшие
биты самого этого байта);длина копируемой строки равна (код-100h+3). Выборка из
входного потока идет со _старших_ битов и с младших адресов,распаковка произво-
дится до тех пор, пока не будет распаковано заданное число байт.
Описывать здесь сам адаптивный метод Хаффмена я счел неуместным - так что RTFM;
а детали реализации распаковщика желающие могут получить, изучив его исходный
текст.
Распакованное тело картинки во всех случаях представляет собой простой битмап;
0 - прозрачный цвет.
Нужно отметить,что среди имеющих это расширение файлов встречаются также и
файлы,представляющие собой простой несжатый квадратный битмап без заголовка.

Только и всего...