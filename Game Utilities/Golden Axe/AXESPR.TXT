Файл графики .SPR игры GOLDEN AXE состоит из заголовка и набора последователь-
ностей. Заголовок файла устроен так:
+00 DW число последовательностей (не более 40)
+02 DW сегмент тела 1-й последовательности от начала файла (если -1 - взять
       предыдущую)
+04 DW размер тела 1-й последовательности в параграфах
+06 ... так же для остальных последовательностей
+?? нули до границы параграфа
Тело последовательности сжато общим для всех файлов этой игры методом. Сжатый
блок устроен так:
+00 DB*10 заголовок: 'GOLDENAXE',0Ch
+0A ... собственно тело последовательности
+?? DB*20 мусор: 20 последних байт отбрасываются
Тело последовательности сжато LZW-методом в реализации, почти соответствующей
формату GIF: коды от 9 до 12 бит, размер таблицы 1000h кодов, 100h - код
очистки; однако, код конца информации не используется, так что коды сжатия
начинаются со 101h, и данные начинаются со значащего кода, а не с кода очистки.
Коды размещаются в файле пакетами по 8, все коды в пакете одной длины, выборка
идет с младших битов и с младших адресов; если длина кода меняется до исчерпа-
ния текущего пакета, остаток пакета отбрасывается; в последнем пакете только
столько байт, сколько реально занято кодами.Несколько последних кодов могут
быть ошибочными,так что на первом же коде,большем текущего,распаковку следует
закончить.

Описывать здесь сам LZW-метод я счел неуместным - так что RTFM.
То, что получается при LZW-распаковке, кроме того, дополнительно сжато
RLE-методом: 90h XXh - (XXh-1) раз повторить последний не равный 90h байт;
90h 00h - выдать 90h; иначе просто выдать байт в выходное изображение.
Несжатое тело последовательности состоит из заголовка и набора фаз. Заголовок
устроен так:
+00 DW 0FFFFh
+02 DW число фаз
+04 DW*? смещения фаз в теле последовательности
+?? ... фазы
Фаза состоит из заголовка и тела. Заголовок фазы устроен так:
+00 DW размер фазы в байтах
+02 DW ширина фазы
+04 DB высота фазы
+05 DB флаги: бит 7=1 - тело фазы сжато
              бит 6=1 - есть прозрачный цвет
              остальные на вывод не влияют
+06 DB прозрачный цвет
+07 DB Y-координата точки вставки
+08 DW X-координата точки вставки
+0A DB 16h*(?) что-то бессмысленное
+20 ... тело фазы
Тело фазы может быть сжато блочным RLE-методом. В этом случае оно состоит,
естественно, из блоков. Блоки устроены так:
блок заполнения:
+0 DB X (как байт со знаком, >0)
+1 DB цвет, по нему X точек закрашиваются этим цветом
блок копирования:
+0 DB -X (как байт со знаком, <0)
+1 DB X байт изображения, по нему они копируются на экран

Только и всего...
