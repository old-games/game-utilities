Файл графики .SHP в Thunderscape состоит из заголовка и набора картинок.
Картинки состоят из заголовка и набора блоков.
Заголовок файла устроен так:
+0  DB '1.10' (идентификатор формата)
+4  DD число картинок в файле
+8  DQ смещение в файле 1-й картинки
+10 ... (так же для всех картинок)
Заголовок картинки устроен так:
+0  DW высота реальной картинки-1
+2  DW ширина реальной картинки-1
+4  DW отступ сверху до нулевой точки
+6  DW отступ слева до нулевой точки
+8  DD собственный сдвиг картинки вправо
+C  DD собственный сдвиг картинки вниз
+10 DD ширина картинки вместе со сдвигом-1
+14 DD высота картинки вместе со сдвигом-1
+18 ... (блоки, если они есть)
Блоков нет (картинка пуста), если [+14]+1-[+C]<=0 (как DWORD со знаком)
или (другой вариант) [+8] и/или [+C]>7FFF0000h
Блоки устроены так:
блок копирования:
+0 DB xxxxxxx1
+1 DB (xxxxxxx) байт изображения, по нему они копируются на экран
блок пропуска:
+0 DB 00000001
+1 DB Y , по нему Y точек пропускается (прозрачный цвет)
блок заполнения:
+0 DB xxxxxxx0
+1 DB цвет , по нему (xxxxxxx) точек закрашиваются этим цветом
блок перевода строки:
+0 DB 00000000 , по нему производится переход к следующей строке, а при
      исчерпании счетчика строк - завершается вывод изображения
Вот,собственно,и все...