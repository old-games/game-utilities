Файл анимации в Heroes of Might and Magic устроен так:
+0 DW число картинок в файле
+2 DD размер файла-6
+6 ... заголовки картинок
+? ... тела картинок
Заголовок картинки устроен так:
+0 DW сдвиг слева
+2 DW сдвиг сверху
+4 DW ширина картинки
+6 DW высота картинки
+8 DD смещение тела картинки в файле-6
+C ... (следующий заголовок)
Картинки подразделяются на 2 типа, никаких отличительных признаков не имеющие.
Тело картинки первого типа - 256-цветной - состоит из набора блоков.Блоки
устроены так:
блок копирования:
+0 DB 0xxxxxxx, X>0
+1 DB (xxxxxxx) байт изображения, по нему они копируются на экран
блок пропуска:
+0 DB 1xxxxxxx, X>0, по нему (xxxxxxx) точек пропускается (прозрачный цвет)
концевик строки:
+0 DB 00000000, по нему происходит переход к следующей строке
концевик картинки:
+0 DB 10000000, по нему вывод изображения прекращается
Тело картинки второго типа - 1-цветной - также состоит из набора блоков.Блоки
устроены так:
блок заполнения:
+0 DB 0xxxxxxx, X>0, по нему (xxxxxxx) точек закрашиваются
блок пропуска:
+0 DB 1xxxxxxx, X>0, по нему (xxxxxxx) точек пропускается (прозрачный цвет)
концевик строки:
+0 DB 00000000, по нему происходит переход к следующей строке
концевик картинки:
+0 DB 10000000, по нему вывод изображения прекращается
Отличать эти типы друг от друга возможно только опытным путем - проверять,
соответствует ли данному типу тело данной картинки, по признаку наличия
указанного в заголовке числа корректных строк с концевиками, за которыми
следует концевик картинки. Такая проверка проще для второго типа.

Вот,собственно,и все...